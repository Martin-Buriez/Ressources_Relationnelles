{% extends 'base.html.twig' %}

{% block title %}Les Évenements !{% endblock %}

{% block body %}
    <div class="w-full h-1/5 bg-blue1 shadow-lg py-16">
        <h1 class="text-center font-bold text-5xl text-white">Les Événements</h1>
        <div class="mx-auto h-px w-40 bg-white mt-8"></div>
    </div>
    <section class="bg-main-white dark:bg-main-black w-full md:w-11/12 lg:w-10/12 xl:w-9/12 mx-auto mt-12">
        <!-- component -->
        <div class="text-gray-600 body-font">
            <div class="container px-5 py-5 mx-auto">
                <div class="flex flex-wrap -m-4">
                    <!--Début-->
                    {% for event in events %}
                        <div class="p-4 w-1/3 mx-auto border" >
                            <div class="h-full overflow-hidden">
                                <div class="w-full">
                                    <div class="w-full flex p-2">
                                        <div class="p-2 ">
                                            {% if event.userManageEvents[0].user.ProfilePicture %}
                                                <img
                                                    src="{{ asset('uploads/user/avatar/' ~ event.userManageEvents[0].user.ProfilePicture) }}" alt="{{ event.userManageEvents[0].user.ProfilePicture }}"
                                                    class="w-10 h-10 rounded-full overflow-hidden"/>
                                            {% else %}
                                                <img
                                                    src="{{ asset('assets/media/img/user.svg') }}" alt="Avatar de {{ event.userManageEvents[0].user.ProfilePicture }}"
                                                    class="w-10 h-10 rounded-full overflow-hidden"/>
                                            {% endif %}
                                        </div>
                                        <div class="pl-2 pt-2 ">
                                            <p class="font-bold">{{ event.title}}</p>
                                            <p class="text-xs">Prévu :{{ event.createdAt|date('d-m-Y') }}</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="p-4">
                                    <h1 class="tracking-widest text-xs title-font font-bold text-main-blue dark:text-main-white mb-1 uppercase ">{{ event.title }}</h1>
                                    <h2 class="title-font text-lg font-medium text-gray-900 mb-3">{{ event.content|u.truncate(150, '...') }}</h2>
                                    <div class="flex items-center flex-wrap ">
                                        {% if app.user != null %}
                                            {% if userManageEvents[0].IsOrganizer %}
                                                <p class="inline-flex items-center">Vous êtes l'organisateur</p>
                                            {% elseif userManageEvents[0].IsParticipant %}
                                                <p class="inline-flex items-center">Vous participer déja cet événement</p>
                                            {% else %}
                                                <p class="inline-flex items-center">Participer à l'événement
                                                    <a href="{{ path('user_participe_event', {'idEvent': event.id }) }}" class="text-green-800  md:mb-2 lg:mb-0">  <!-- Participation a un event  -->
                                                        <svg class="w-4 h-4 ml-2" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round">
                                                            <path d="M5 12h14"></path>
                                                            <path d="M12 5l7 7-7 7"></path>
                                                        </svg>
                                                    </a>
                                                </p>
                                            {% endif %}
                                        {% else %}
                                            <p class="inline-flex items-center">
                                                <a href="{{ path('app_login') }}" class="text-green-800  md:mb-2 lg:mb-0"> 
                                                    Connectez-vous pour participer !
                                                </a>
                                            </p>
                                        {% endif %}
                                        <span class="text-black mr-3 inline-flex items-center lg:ml-auto md:ml-0 ml-auto leading-none text-sm pr-3 py-1">
                                            <a>
                                                <i class="fas fa-users"></i>
                                            </a>
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        {% for message in app.flashes('success') %}
                            <div class="alert z-10 bg-green-300 absolute mx-auto">
                                {{ message }}
                            </div>
                        {% endfor %}
                        {% for message in app.flashes('error') %}
                            <div class="alert z-10 bg-red-300 absolute mx-auto">
                                {{ message }}
                            </div>
                        {% endfor %}
                    {% endfor %}
                </div>
            </div>
        </div>
    </section>
{% endblock %}
