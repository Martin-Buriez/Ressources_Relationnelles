{% extends 'base.html.twig' %}
{% block title %}Les publications !{% endblock %}
{% block body %}
    <section class="bg-main-white dark:bg-main-black w-full md:w-11/12 lg:w-10/12 xl:w-9/12 mx-auto mt-12">
        <!-- component -->
        <div class="text-gray-600 body-font">
            <div class="container px-5 py-5 mx-auto">
                <div class="flex flex-wrap -m-4">
                    <!--DÃ©but-->
                    {% for publication in publications %}
                        <div class="p-4 md:w-1/3" >
                            <div class="h-full overflow-hidden">
                                <div class="w-full">
                                    <div class="w-full flex p-2">
                                        <div class="p-2 ">
                                            {% if publication.createdBy.ProfilePicture %}
                                                <img
                                                    src="{{ asset('uploads/user/avatar/' ~ publication.createdBy.ProfilePicture) }}" alt="{{ publication.createdBy.username }}"
                                                    class="w-10 h-10 rounded-full overflow-hidden"/>
                                            {% else %}
                                                <img
                                                    src="{{ asset('assets/media/img/user.svg') }}" alt="Avatar de {{ publication.createdBy.username }}"
                                                    class="w-10 h-10 rounded-full overflow-hidden"/>
                                            {% endif %}
                                        </div>
                                        <div class="pl-2 pt-2 ">
                                            <p class="font-bold">{{ publication.title}}</p>
                                            <p class="text-xs">{{ publication.createdAt|date('d-m-Y') }}</p>
                                        </div>
                                    </div>
                                </div>
                                {% if publication.publicationIncludeImages %}
                                    <img class="lg:h-48 md:h-36 w-full object-cover object-center" src="{{ asset('uploads/ressource/images/'~publication.publicationIncludeImages[0].image.name) }}" alt="blog cover"/>
                                {% endif %}
                                <div class="p-4">
                                    <h1 class="tracking-widest text-xs title-font font-bold text-main-blue dark:text-main-white mb-1 uppercase ">{{ publication.title }}</h1>
                                    <h2 class="title-font text-lg font-medium text-gray-900 mb-3">{{ publication.description|u.truncate(150, '...') }}</h2>
                                    <div class="flex items-center flex-wrap ">
                                        <a href="{{ path('publication_show', {'slug': publication.slug,'idPublication': publication.id}) }}" class="text-green-800  md:mb-2 lg:mb-0">
                                            <p class="inline-flex items-center">Voir le blog
                                                <svg class="w-4 h-4 ml-2" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round">
                                                    <path d="M5 12h14"></path>
                                                    <path d="M12 5l7 7-7 7"></path>
                                                </svg>
                                            </p>
                                        </a>
                                        <span class="text-gray-400 mr-3 inline-flex items-center lg:ml-auto md:ml-0 ml-auto leading-none text-sm pr-3 py-1 border-gray-200">
                                            <i class="fas fa-eye">{{ publication.viewNumber }}</i>
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    {% endfor %}
                </div>
                <div class="flex justify-center px-4 py-3  font-semibold tracking-wide  uppercase border-t border-gray-700  sm:grid-cols-9 text-gray-400">
                    <!-- Pagination -->
                    <div class="flex justify-start lg:justify-end items-center my-12">
                        {% include 'partials/pagination/publication_pagination.html.twig' with {'route': 'blogs'} %}
                    </div>
                </div>
            </div>
        </div>
    </section>
{% endblock %}
